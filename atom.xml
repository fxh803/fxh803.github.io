<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>fxh的博客</title>
  
  
  <link href="https://fxhblog.com/atom.xml" rel="self"/>
  
  <link href="https://fxhblog.com/"/>
  <updated>2023-12-06T13:35:48.399Z</updated>
  <id>https://fxhblog.com/</id>
  
  <author>
    <name>fxh</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>unity的URP渲染管线</title>
    <link href="https://fxhblog.com/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/"/>
    <id>https://fxhblog.com/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/</id>
    <published>2023-12-05T16:00:00.000Z</published>
    <updated>2023-12-06T13:35:48.399Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是URP渲染管线，它有什么优点"><a href="#什么是URP渲染管线，它有什么优点" class="headerlink" title="什么是URP渲染管线，它有什么优点"></a>什么是URP渲染管线，它有什么优点</h1><p>URP全称universal rendering pipeline。在unity中是一种渲染流程，与默认的build-in渲染管线不一样，它有很多优点。<br>1.多平台，URP可以在不同的平台上保持一致的效果。<br>2.高性能，相较于默认管线，性能更好。<br>3.模块化，允许开发者更容易地定制和扩展渲染管线。作为入门我这个还没有感觉到。<br>4.现代渲染特性，先较默认管线多出来很多渲染功能，如后处理，屏幕空间反射等等。</p><h1 id="怎么转换到URP渲染管线"><a href="#怎么转换到URP渲染管线" class="headerlink" title="怎么转换到URP渲染管线"></a>怎么转换到URP渲染管线</h1><p>如图所示，点击窗口，包管理器，选择unity注册表。然后搜索universal xxxx，就弹出这个，下载。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/1.png"><br>接下来新建一个URP配置文件，如图所示。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/2.png"><br>创建之后会有两个文件，然后我们打开项目设置的graphic选项，如图把配置文件拖过去。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/3.png"><br>然后我们发现一些材质变成了紫色，那是因为适用于原本管线的材质在URP中失效了，我们需要把它们转换成URP的材质。</p><h1 id="URP材质转换"><a href="#URP材质转换" class="headerlink" title="URP材质转换"></a>URP材质转换</h1><p>在2022版unity中，点击窗口，渲染，我们看到有一个渲染管线转换器，点击它。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/4.png"><br>我们把所有选项都勾选，然后点击initialize and convert。</p><p><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/5.png"><br>如果转换之后还是出现紫色，说明这些材质可能要自己手动去调整为URP材质。以这个树枝为例。<br>我们要找到universal rendering pipeline的着色器，选择lit。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/6.png"><br>对于这个树枝的材质调整，首先是把先前的贴图贴上，然后是选择alpha裁剪，设置一定的数，让材质像树丛一样有缝隙。然后表面材质选择不透明，使场景有树荫。其他可以看情况去调整。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/7.png"></p><h1 id="重新渲染"><a href="#重新渲染" class="headerlink" title="重新渲染"></a>重新渲染</h1><p>为了获得更好的光影，我们重新将场景的光影渲染全部去除并重新添加</p><h2 id="天空盒和直接光"><a href="#天空盒和直接光" class="headerlink" title="天空盒和直接光"></a>天空盒和直接光</h2><p>在窗口，渲染选项中找到照明，然后在环境选项卡中添加默认天空盒，同时在场景中添加直接光。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/8.png"><br>在直接光选项中添加软阴影<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/9.png"><br>环境选项卡中添加直接光为太阳光源，以及添加天空盒为环境照明和环境反射。其他属性看情况调整一下。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/10.png"></p><h2 id="场景烘焙"><a href="#场景烘焙" class="headerlink" title="场景烘焙"></a>场景烘焙</h2><p>在这里我们首先要新建一个光照设置。烘焙的设置比较多，首先分为实时光照和混合照明。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/11.png"></p><h3 id="实时光照"><a href="#实时光照" class="headerlink" title="实时光照"></a>实时光照</h3><p>实时光照很明显，就是计算机实时计算你的光。它会将你场景的所有灯光设置成实时模式，所有静态和非静态的物体表面光照都会受实时光照影响。</p><h3 id="混合照明"><a href="#混合照明" class="headerlink" title="混合照明"></a>混合照明</h3><p>混合照明比较复杂，分三种模式：间接烘焙（BakedIndirect），shadowmask ，减性（Subtractive）</p><h4 id="BakedIndirect"><a href="#BakedIndirect" class="headerlink" title="BakedIndirect"></a>BakedIndirect</h4><p>在此模式下Baked和Mixed模式灯光只会渲染间接光源（物体反弹的光）<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/12.png"><br>我把所有光源都去掉了，树林还有间接光</p><h4 id="Subtractive"><a href="#Subtractive" class="headerlink" title="Subtractive"></a>Subtractive</h4><p>Mixed的灯光对静态物体烘培直接光源间接光源和阴影，对动态物体实时渲染阴影，删掉的话会影响动态对象的阴影渲染<br>Baked的灯光对静态物体烘培直接光源间接光源和阴影，不对动态物体实时渲染光线，删掉的话不影响场景</p><p><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/13.gif"><br>这是mixed光，对于动态物体（树）是实时渲染的，而对于静态物体（地面）则是烘焙（光照不变）。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/13.png"><br>把mixed光去除，发现地面因为渲染了直接光比较亮，而动态物体（树）就变暗了，而且没有了阴影。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/14.gif"><br>换成baked光，动态物体（树）不实时渲染了。而且去不去除这个灯光对树和地面都没有影响。</p><h4 id="shadowmask"><a href="#shadowmask" class="headerlink" title="shadowmask"></a>shadowmask</h4><p>Shadownmask类似 BakedIndirect，不同的就是渲染阴影的方式。<br>Shadowmask 光照模式允许 Unity 在运行时结合烘焙阴影和实时阴影，并允许渲染远处的阴影。并且提供最好的阴影渲染效果<br>简而言之就是近处阴影是实时远处是烘焙阴影</p><p>在这个场景，我们渲染一下间接光照。</p><h2 id="反射探针"><a href="#反射探针" class="headerlink" title="反射探针"></a>反射探针</h2><p>反射探针可以实现一些镜面反射的效果。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/15.png"><br>如上图新建一个发射探测器。<br>如果没有在场景烘焙那里选择自动生成，就要每次改动都点击一下发射探测器的bake按钮，我们可以在场景烘焙那里勾选一下自动生成。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/16.png"><br>调整探针区域，覆盖住这个场景<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/17.png"><br>把探针本身放到合适的位置，实现反射<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/18.png"></p><h2 id="后处理"><a href="#后处理" class="headerlink" title="后处理"></a>后处理</h2><p>后处理的功能十分强大，这里举两个例子</p><h3 id="bloom-泛光"><a href="#bloom-泛光" class="headerlink" title="bloom 泛光"></a>bloom 泛光</h3><p>添加一个全局体积<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/19.png"><br>新建一个配置文件，然后添加覆盖bloom。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/20.png"><br>稍微拉一下数值，得到一个暖色调的泛光，模拟日落。<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/21.png"></p><h3 id="tone-mapping"><a href="#tone-mapping" class="headerlink" title="tone mapping"></a>tone mapping</h3><p>添加覆盖tone mapping，设置模式为ACES<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/22.png"><br>获得较强的对比度<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/23.png"></p><h2 id="环境光遮挡"><a href="#环境光遮挡" class="headerlink" title="环境光遮挡"></a>环境光遮挡</h2><p>从项目设置的graphic选项卡中点击管道设置找到相应资产<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/24.png"><br>再点击这个资产的渲染器找到对应的渲染器<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/25.png"><br>添加下图中的光遮挡选项，设置一定的强度<br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/26.png"></p><p><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/27.png"><br><img src="/2023/12/06/unity%E7%9A%84URP%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/28.png"><br>获得细节处的光遮挡阴影，通常这个效果是应用于物体拐角缝隙处，呈现阴影的效果。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;什么是URP渲染管线，它有什么优点&quot;&gt;&lt;a href=&quot;#什么是URP渲染管线，它有什么优点&quot; class=&quot;headerlink&quot; title=&quot;什么是URP渲染管线，它有什么优点&quot;&gt;&lt;/a&gt;什么是URP渲染管线，它有什么优点&lt;/h1&gt;&lt;p&gt;URP全称unive</summary>
      
    
    
    
    <category term="unity" scheme="https://fxhblog.com/categories/unity/"/>
    
    
  </entry>
  
  <entry>
    <title>谷歌OWL-ViT模型</title>
    <link href="https://fxhblog.com/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/"/>
    <id>https://fxhblog.com/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/</id>
    <published>2023-12-02T16:00:00.000Z</published>
    <updated>2023-12-03T15:24:18.284Z</updated>
    
    <content type="html"><![CDATA[<h1 id="这是什么模型？"><a href="#这是什么模型？" class="headerlink" title="这是什么模型？"></a>这是什么模型？</h1><p>OWL-ViT是一个开放词汇物体检测模型，给予查询文本query_text或者查询图片，模型可以在目标图像target_image上检测目标。</p><h1 id="大致结构"><a href="#大致结构" class="headerlink" title="大致结构"></a>大致结构</h1><p><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/structure.png"><br>此项工作首先是通过图像文本对去预训练一个图像和文本编码器（左图）类似于CLIP，然后再将预训练的两个编码器放到开放词汇检测模型中（右图），但是去掉了token pooling，添加了linear projection和MLP head两个模块连接到输出。然后再进行find-tuning去优化其余的部分网络。</p><h1 id="推理过程"><a href="#推理过程" class="headerlink" title="推理过程"></a>推理过程</h1><p><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/owl_vit_schematic.png"></p><h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><p>图中展示了模型是如何进行推理的。我们可以看到模型的输入是文本+图片，输出是预测框（predicted boxes）和对应输出框的类别（predicted classes/queries）。</p><h2 id="文本编码成向量"><a href="#文本编码成向量" class="headerlink" title="文本编码成向量"></a>文本编码成向量</h2><p>对于文本，是经过了一个text Transformer encoder的编码，应该是跟transformer的encoder差不多的结构，将文本转换成向量作为query embeddings。图中三个单词就是三个向量，如图紫色方块。</p><h2 id="图片编码成向量"><a href="#图片编码成向量" class="headerlink" title="图片编码成向量"></a>图片编码成向量</h2><p>对于图片，是经过 vision transformer的编码器转成向量，就是图中四个粉色的矩形，然后通过线性投影和多层感知机转换到更大的维度上。就是说经过linear projection和MLP head可以从4个向量变成几百个向量。就是图中绿色和白色的矩形，他们是一一对应的，代表着检测的一个一个box。</p><h2 id="计算余弦相似度"><a href="#计算余弦相似度" class="headerlink" title="计算余弦相似度"></a>计算余弦相似度</h2><p>类似CLIP模型，将得到的query embeddings（紫色方块的向量）和线性投影后的向量（绿色方块的向量）进行点乘，点乘的结果越大说明越相似。<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/cos.png"></p><p>举个栗子<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/similar.png"></p><p>在结构图中的点乘矩阵，第一行最大的数在第一列，说明第一行最有可能是giraffe，所以相应的box（x1，y1，w1，h1）就被预测为giraffe长颈鹿。<br>第三行的第二列最大，所以box（x3，y3，w3，h3）被预测为tree。<br>而第四行的每个点乘结果都很低，经过阈值筛选后没有得到结果（no object）。</p><h1 id="图像文本编码器的预训练"><a href="#图像文本编码器的预训练" class="headerlink" title="图像文本编码器的预训练"></a>图像文本编码器的预训练</h1><p>在大致结构中，我们得知要先预训练两个编码器。首先我们先了解两个编码器的构造。</p><h2 id="Text-Transformer-encoder"><a href="#Text-Transformer-encoder" class="headerlink" title="Text Transformer encoder"></a>Text Transformer encoder</h2><p>这里的文本编码器应该就是普通的transformer编码器<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/encoder.png"><br>1.将文本单词text2seq之后的向量跟位置向量相加<br>2.进入多头注意力机制<br>3.把多头注意力的结果和position embedded的输入向量相加并归一化<br>4.进入Feed Forward 层，这是一个两层的全连接层，第一层的激活函数为 Relu，第二层不使用激活函数<br>5.跟第3步相似，也是把进入Feed Forward 层前的向量和Feed Forward 层后的向量相加并归一化。<br>6.重复N次，得到结果</p><h2 id="vision-transformer-encoder"><a href="#vision-transformer-encoder" class="headerlink" title="vision transformer encoder"></a>vision transformer encoder</h2><p><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/visiontrans.png"><br>上图就是vision transformer的分类任务的流程。首先先将一张图片分割成许多个patch，如图所示这里分成了9个。然后将每一个patch图片拍平变成一维的向量通过线性投射层。<br>举个栗子，patch可以是16x16，那么每个patch维度就是16x16x3=768，然后有9个patch，就是9x768 ，经过线性投影也还是 9x768 ，但是还有特殊字符cls，因此最终的维度是10x768</p><p>然后我们需要将patch向量和位置向量相加，不是拼接，维度不变。<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/posembed.png"></p><p>然后我们就把这个维度为10x768的向量丢进这个transformer Encoder：<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/vitencoder.png"></p><p>1，首先是将这个向量进行归一化（NORM）,然后进入多头自注意力机制中。<br>2，然后将多头子注意力机制的结果与encoder原输入相加，进行归一化，再经过多层感知机得到结果。<br>3，然后又将多层感知机的结果跟上一次相加后的向量相加，输出。<br>4，这个过程重复L次。</p><p>从encoder出来之后进入多层感知机，便进行分类。</p><h1 id="self-attention"><a href="#self-attention" class="headerlink" title="self attention"></a>self attention</h1><p>上面提及自注意力机制，这里阐述一下过程<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/qkv.png"></p><p>如上图所示，在这里我们的x1，x2就是我们归一化之后的且positon embedded的patches。通过与Wq，Wk和Wv进行矩阵运算之后得到q，k，v。Wq，Wk和Wv 这三个矩阵是我们要训练的东西。我们有10个x，x1~x10。</p><p><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/qkv2.png"><br>单个q与所有的k进行点乘，得到score</p><p><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/qkv3.png"><br>然后我们要将得到的score除以一个数，这个数一般是x矩阵的第一个维度的开方，就是patch数量的开方，我们这应该是根号10。<br>然后将运算后的结果放到softmax中。<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/qkv4.png"><br>然后把softmax的结果和v相乘。得到v1，v2，v3，v4…v10，再将他们全部加起来得到z1。</p><p>最后以此类推，计算出z2，z3，z4… z10，拼接起来得到单个self attention的结果。这个过程可以通过矩阵运算快速得到。<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/qkv5.png"><br>如果是多头自注意力，就是将多个子注意力输出的z向量拼接，然后经过线性变化得到结果。<br><img src="/2023/12/03/%E8%B0%B7%E6%AD%8COWL-ViT%E6%A8%A1%E5%9E%8B/multihead.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;这是什么模型？&quot;&gt;&lt;a href=&quot;#这是什么模型？&quot; class=&quot;headerlink&quot; title=&quot;这是什么模型？&quot;&gt;&lt;/a&gt;这是什么模型？&lt;/h1&gt;&lt;p&gt;OWL-ViT是一个开放词汇物体检测模型，给予查询文本query_text或者查询图片，模型可以在目</summary>
      
    
    
    
    <category term="深度学习" scheme="https://fxhblog.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>基于react-native框架的移动端开发</title>
    <link href="https://fxhblog.com/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    <id>https://fxhblog.com/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/</id>
    <published>2023-09-05T16:00:00.000Z</published>
    <updated>2023-12-03T10:04:51.983Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是react-native（RN）"><a href="#什么是react-native（RN）" class="headerlink" title="什么是react-native（RN）?"></a>什么是react-native（RN）?</h1><p>rn其实可以看作react框架在移动端的一个“兄弟”框架，它的写法跟react差不多。使用rn好处在于即使对Android原生开发不熟悉，但有写web的经验的话很快能够上手。</p><h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><p>参考<a href="https://www.reactnative.cn/docs/environment-setup">官方环境配置指引</a></p><p>这里不详细展开，总体而言我们需要配置<font color=red>node.js</font> , <font color=red>jdk(Java SE Development Kit)</font> 和 <font color=red>android studio</font>。</p><h2 id="node-js"><a href="#node-js" class="headerlink" title="node.js"></a>node.js</h2><p>建议通过<a href="https://github.com/coreybutler/nvm-windows/releases">nvm</a>安装管理node，nvm可以随时切换node版本，不用担心不同项目的node版本不同而无法运行只能重新卸载安装node。<br><img src="/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/nvmdownload.png"></p><h2 id="android-studio"><a href="#android-studio" class="headerlink" title="android studio"></a>android studio</h2><p>在下载androidstudio通常需要使用梯子，感觉使用美国节点下载可能更快更稳定一些（未经验证）。<br>在这里有一些小坑，比如说Intel x86 Atom_64 System Image这个模拟器镜像<br><img src="/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/sysimage.png"><br>我在SDK Manager的 SDK Platforms里半天找不到，后来选了个下图最相似的这个东东，后面模拟器能跑，就当且如此吧。<br><img src="/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/sysimageselect.png"></p><h1 id="项目运行前配置"><a href="#项目运行前配置" class="headerlink" title="项目运行前配置"></a>项目运行前配置</h1><p>在运行之前，要了解到构建一个rn项目需要一些时间去下载相关内容。因此我们要保证有一个良好的网络环境，以及考虑下载缓存对c盘的挤占。因此我配置了一下下载文件的路径，使其将缓存下到我希望的文件夹位置。</p><h2 id="更改Android-studio默认构建文件路径"><a href="#更改Android-studio默认构建文件路径" class="headerlink" title="更改Android studio默认构建文件路径"></a>更改Android studio默认构建文件路径</h2><p>构建时androidstudio会在<font color=red>C:\Users\xxx（你的用户名）</font>文件夹生成.gradle文件夹。这个文件夹大几G非常吃空间，因此我们需要在合适的地方创建文件夹，让它下载构建到此处。这里我示范新路径<font color=red>D:\AndroidStudioData\.gradle</font></p><p>配置环境变量的系统变量<br><img src="/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/gradle.png"></p><h2 id="更改Android-studio默认模拟器文件路径"><a href="#更改Android-studio默认模拟器文件路径" class="headerlink" title="更改Android studio默认模拟器文件路径"></a>更改Android studio默认模拟器文件路径</h2><p>如果你在androidstudio中创建模拟器或直接在项目运行时创建模拟器，会在<font color=red>C:\Users\xxx（你的用户名）</font>文件夹生成.android文件夹，这个文件夹也是巨大无比高达10G以上。这里我示范新路径<font color=red>D:\AndroidStudioData\.android</font></p><p>配置环境变量的系统变量<br><img src="/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/android.png"></p><h1 id="项目的运行-RN-启动"><a href="#项目的运行-RN-启动" class="headerlink" title="项目的运行 RN?启动!"></a>项目的运行 RN?启动!</h1><p>我们可以在合适位置新建一个项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx react-native@latest init AwesomeProject <span class="comment"># 新建项目</span></span><br><span class="line"><span class="built_in">cd</span> AwesomeProject <span class="comment"># 进入项目文件夹</span></span><br><span class="line">yarn android <span class="comment">#前提是你已安装yarn</span></span><br></pre></td></tr></table></figure><p>如果是第一次运行新项目，建议别着急yarn android，不然会很慢才能启动。<br>慢就算了，而且有可能卡在一个地方不显示正在运行的脚本信息（其实它在构建只是没告诉你）。这样的问题是如果网络不好构建的很慢你无从知晓，眼看这终端卡住一点东西都弹不出来急死人。</p><p>因此我们在androidstudio中打开项目文件夹中的android文件夹，让它预先构建好。androidstudio的右下方可以显示构建的详细信息。<br><img src="/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/open.png"></p><p>看到右下方不再构建，我们就可以</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn android </span><br></pre></td></tr></table></figure><p>记得提前用USB连接你的手机或者打开一个模拟器。</p><h1 id="项目构造"><a href="#项目构造" class="headerlink" title="项目构造"></a>项目构造</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">App.js/App.tsx <span class="comment">#项目的根组件</span></span><br><span class="line">index.js <span class="comment">#项目入口</span></span><br><span class="line">app.json <span class="comment">#项目的配置文件</span></span><br><span class="line">android  <span class="comment">#安卓的项目数据文件夹</span></span><br><span class="line">ios  <span class="comment">#ios的项目数据文件夹</span></span><br><span class="line">node_modules <span class="comment">#包文件夹</span></span><br><span class="line">package.json <span class="comment">#包信息json文件</span></span><br></pre></td></tr></table></figure><h1 id="rn语法入门"><a href="#rn语法入门" class="headerlink" title="rn语法入门"></a>rn语法入门</h1><p>看这个名叫HomeScreen的组件文件<br><img src="/2023/09/06/%E5%9F%BA%E4%BA%8Ereact-native%E6%A1%86%E6%9E%B6%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/code.png"></p><p>其实如果比较了解web三件套可以很明显的看出rn的代码其实也只是三件套的另一种组织方式。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import xxx <span class="comment">#导入包</span></span><br><span class="line">const HomeScreen=()=&gt;&#123;</span><br><span class="line">  ...</span><br><span class="line">    const f=()=&gt;&#123;&#125; <span class="comment">#一个函数f</span></span><br><span class="line">  ...</span><br><span class="line">    <span class="built_in">return</span>&#123;</span><br><span class="line">        ... <span class="comment">#html</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">#一个HomeScreen组件 </span></span><br><span class="line"></span><br><span class="line">const styles= StyleSheet.create(&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;); <span class="comment">#一个CSS的样式表</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default HomeScreen;<span class="comment">#导出组件</span></span><br></pre></td></tr></table></figure><p>有时候也可以有这样的一种形式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import xxx <span class="comment">#导入包</span></span><br><span class="line"><span class="built_in">export</span> default <span class="keyword">function</span> a =()=&gt;&#123;</span><br><span class="line">  ...</span><br><span class="line">    const f=()=&gt;&#123;&#125; <span class="comment">#一个函数f</span></span><br><span class="line">  ...</span><br><span class="line">    <span class="built_in">return</span>&#123;</span><br><span class="line">        ... <span class="comment">#html</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">#一个组件a</span></span><br></pre></td></tr></table></figure><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>关于rn还有很多细枝末节还没有摸清楚，但想要编写一个移动端应用，掌握好基本的rn使用其实就已经ok了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;什么是react-native（RN）&quot;&gt;&lt;a href=&quot;#什么是react-native（RN）&quot; class=&quot;headerlink&quot; title=&quot;什么是react-native（RN）?&quot;&gt;&lt;/a&gt;什么是react-native（RN）?&lt;/h1&gt;&lt;p&gt;</summary>
      
    
    
    
    <category term="移动端开发" scheme="https://fxhblog.com/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="react-native" scheme="https://fxhblog.com/tags/react-native/"/>
    
    <category term="android" scheme="https://fxhblog.com/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>flask项目部署到阿里云</title>
    <link href="https://fxhblog.com/2023/01/29/flask%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    <id>https://fxhblog.com/2023/01/29/flask%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/</id>
    <published>2023-01-29T09:18:04.000Z</published>
    <updated>2023-12-03T10:07:55.782Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>上一年在学校做好了一个前后端打通的web应用，但是只是在本地上运行，没有部署到服务器。之前也没有接触过相关知识，于是跟着<a href="https://blog.csdn.net/qq_40423339/article/details/86606308?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167400753316800182743386%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=167400753316800182743386&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-5-86606308-null-null.142%5Ev71%5Econtrol_1,201%5Ev4%5Eadd_ask&utm_term=%E9%98%BF%E9%87%8C%E4%BA%91%E9%83%A8%E7%BD%B2flask&spm=1018.2226.3001.4449">教程</a>尝试部署了一下。</p><h1 id="购买服务器"><a href="#购买服务器" class="headerlink" title="购买服务器"></a>购买服务器</h1><p>这里就略过，我选择的是阿里云云服务器ECS上Ubuntu16 64位的系统。购买完之后会有一个实例，就是我们购买好的服务器，然后第一步我们就要重置实例密码（ssh链接密码），作为接下来我们连接服务器的密码。<br><img src="/2023/01/29/flask%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/1.jpg"></p><h1 id="添加安全组"><a href="#添加安全组" class="headerlink" title="添加安全组"></a>添加安全组</h1><p>添加5000端口，添加80端口，5000是我们flask的端口，80是nginx的端口，所以都要设置好。如图：<br><img src="/2023/01/29/flask%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/2.jpg"></p><h1 id="ssh链接服务器"><a href="#ssh链接服务器" class="headerlink" title="ssh链接服务器"></a>ssh链接服务器</h1><p>打开我们的cmd/powershell，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@xx.xx.xx.xx <span class="comment">#如：ssh root@23.187.187.12（你刚刚买的服务器的公网ip）</span></span><br></pre></td></tr></table></figure><p>然后输入我们刚刚更改的实例密码，就进入到了我们的服务器。输入密码的时候不会显示字符。</p><h1 id="更新apt源"><a href="#更新apt源" class="headerlink" title="更新apt源"></a>更新apt源</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update <span class="comment">#把源更新一下，保证我们用的包都是最新可兼容的</span></span><br></pre></td></tr></table></figure><h1 id="安装mongodb"><a href="#安装mongodb" class="headerlink" title="安装mongodb"></a>安装mongodb</h1><h2 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mongodb <span class="comment"># apt-get 安装 mongodb</span></span><br></pre></td></tr></table></figure><p>安装好后我们验证一下，如果安装不成功，就百度一下报错，大多可能是版本问题</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认下载完后自动启动，可以用以下命令进行验证</span></span><br><span class="line">service mongodb status <span class="comment"># 查看mongodb的启动状态</span></span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">mongo <span class="comment">#进入mongodb数据库验证</span></span><br></pre></td></tr></table></figure><h2 id="2、配置"><a href="#2、配置" class="headerlink" title="2、配置"></a>2、配置</h2><p>验证好之后，我们要对mongodb进行配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改配置</span></span><br><span class="line">vim /etc/mongodb.conf</span><br></pre></td></tr></table></figure><p>vim命令可以进入到服务器的文件进行修改，这里有几个常用的vim操作</p><pre><code>进入编辑模式：在键盘上按下字母i或者a退出编辑模式：    方式一：按下esc键，输入“:wq”3个英文字符，然后按下Enter键，表示保存文件并退出。    方式二：按下esc键，输入“:q”两个英文字符，然后按下Enter键，表示不保存并退出。（如果本次编辑没有修改内容，则可以顺利退出；否则，vim编辑器是不会允许你退出的，这时如果想要不保存退出，就要使用下面的方法三）    方式三：按下esc键，输入“:q!”3个英文字符，然后按Enter键，表示不保存并强制退出。</code></pre><p>参考:<a href="https://blog.csdn.net/qq_52671517/article/details/124673951">vim操作</a></p><p>于是我们进入到文件之后按下a/i，把文件中的配置信息改成如下（注意有的配置项已存在，直接更改不要全部复制粘贴）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">... ...</span><br><span class="line"><span class="comment">#dbpath=/home/ctr_temp/data_base_temp/mongodb/data</span></span><br><span class="line">dbpath=/var/lib/mongodb</span><br><span class="line"></span><br><span class="line"><span class="comment">#where to log</span></span><br><span class="line"><span class="comment">#logpath=/home/ctr_temp/data_base_temp/mongodb/log/mongodb.log</span></span><br><span class="line">logpath=/var/log/mongodb/mongodb.log</span><br><span class="line"></span><br><span class="line">logappend=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bind_ip = 127.0.0.1</span></span><br><span class="line">bind_ip = 0.0.0.0 <span class="comment">#允许外网访问</span></span><br><span class="line"></span><br><span class="line">port = 27017</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable journaling, http://www.mongodb.org/display/DOCS/Journaling</span></span><br><span class="line">journal=<span class="literal">true</span></span><br><span class="line">... ...</span><br></pre></td></tr></table></figure><p>参考：<a href="https://blog.csdn.net/qq_41953485/article/details/126555621?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167401012116800217097023%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=167401012116800217097023&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-3-126555621-null-null.142%5Ev71%5Econtrol_1,201%5Ev4%5Eadd_ask&utm_term=ubuntu%E9%83%A8%E7%BD%B2mongodb&spm=1018.2226.3001.4187">mongo配置</a></p><p>然后稍微重启一下mongodb</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service mongodb stop <span class="comment">#stop</span></span><br><span class="line">service mongodb start <span class="comment">#start</span></span><br><span class="line">service mongodb status <span class="comment"># 查看mongodb的启动状态</span></span><br></pre></td></tr></table></figure><h2 id="3、设置用户信息"><a href="#3、设置用户信息" class="headerlink" title="3、设置用户信息"></a>3、设置用户信息</h2><p>这一步其实可以不做数据库就已经可以使用，但不做的话MongoDB只允许本地连接，同时不需要使用任何账号密码就可以直接连接MongoDB。所以还是要稍微配置一下。</p><p>首先进入数据库，首次没有配置安全认证的情况下进入无需使用用户名以及密码验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br><span class="line">&gt; show dbs <span class="comment"># 查看当前已有的数据库</span></span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line"><span class="built_in">local</span>   0.000GB</span><br></pre></td></tr></table></figure><p>创建管理员用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; use admin <span class="comment">#进入admin这个库</span></span><br><span class="line">switched to db admin</span><br><span class="line">&gt; db.createUser(&#123;user:<span class="string">&quot;xxx_xxxx&quot;</span>,<span class="built_in">pwd</span>:<span class="string">&quot;xxxxxxxx&quot;</span>,roles:[&#123;role:<span class="string">&quot;root&quot;</span>, db:<span class="string">&quot;admin&quot;</span>&#125;]&#125;) <span class="comment">#user和password可以自定义</span></span><br><span class="line">Successfully added user...</span><br></pre></td></tr></table></figure><p>这个管理员是可以掌控整个mongodb的，暂时我们先创建这一个root管理员。有需要的话我们还可以创建多个用户，以实现不同的权限功能，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; use admin</span><br><span class="line">&gt; db.createUser(&#123;user:<span class="string">&quot;xxx_xxxx&quot;</span>,<span class="built_in">pwd</span>:<span class="string">&quot;xxxxxxxx&quot;</span>,roles: [&#123;role:<span class="string">&quot;userAdminAnyDatabase&quot;</span>, db: <span class="string">&quot;admin&quot;</span>&#125;]&#125;)<span class="comment">#授予在所有数据库上管理User的权限</span></span><br><span class="line"></span><br><span class="line">&gt; use test_db <span class="comment">#新建一个数据库</span></span><br><span class="line">&gt; db.createUser(&#123;user:<span class="string">&quot;db_owner&quot;</span>, <span class="built_in">pwd</span>:<span class="string">&quot;xxxxxxxx&quot;</span>, roles:[&#123;role:<span class="string">&quot;dbOwner&quot;</span>, db:<span class="string">&quot;test_db&quot;</span>&#125;]&#125;)<span class="comment">#在当前DB中执行任意操作</span></span><br><span class="line">&gt; db.createUser(&#123;user:<span class="string">&quot;db_user&quot;</span>, <span class="built_in">pwd</span>:<span class="string">&quot;xxxxxxxx&quot;</span>, roles:[&#123;role:<span class="string">&quot;readWrite&quot;</span>, db:<span class="string">&quot;test_db&quot;</span>&#125;]&#125;)<span class="comment">#授予User读写数据的权限</span></span><br></pre></td></tr></table></figure><p>具体mongodb可以创建的用户类型（role）大概有这几种：</p><pre><code>数据库用户角色（Database User Roles）　　　　read：授予User只读数据的权限　　　　readWrite：授予User读写数据的权限数据库管理角色（Database Administration Roles）：　　　　dbAdmin：在当前dB中执行管理操作　　　　dbOwner：在当前DB中执行任意操作　　　　userAdmin：在当前DB中管理User备份和还原角色（Backup and Restoration Roles）：　　　　backup　　　　restore跨库角色（All-Database Roles）：　　　　readAnyDatabase：授予在所有数据库上读取数据的权限　　　　readWriteAnyDatabase：授予在所有数据库上读写数据的权限　　　　userAdminAnyDatabase：授予在所有数据库上管理User的权限　　　　dbAdminAnyDatabase：授予管理所有数据库的权限集群管理角色（Cluster Administration Roles）：　　　　clusterAdmin：授予管理集群的最高权限　　　　clusterManager：授予管理和监控集群的权限，A user with this role can access the config and local databases, which are used in sharding and replication, respectively.　　　　clusterMonitor：授予监控集群的权限，对监控工具具有readonly的权限　　　　hostManager：管理Server</code></pre><p>创建完后我们可以验证一下是否创建成功：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; use admin</span><br><span class="line">switched to db admin</span><br><span class="line">&gt; show <span class="built_in">users</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;_id&quot;</span> : <span class="string">&quot;admin.xxx_xxxx&quot;</span>,</span><br><span class="line"><span class="string">&quot;userId&quot;</span> : UUID(<span class="string">&quot;xxxxxxxxxxxxxxxxxxxx&quot;</span>),</span><br><span class="line"><span class="string">&quot;user&quot;</span> : <span class="string">&quot;xxx_xxxx&quot;</span>,</span><br><span class="line"><span class="string">&quot;db&quot;</span> : <span class="string">&quot;admin&quot;</span>,</span><br><span class="line"><span class="string">&quot;roles&quot;</span> : [</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;role&quot;</span> : <span class="string">&quot;root&quot;</span>,</span><br><span class="line"><span class="string">&quot;db&quot;</span> : <span class="string">&quot;admin&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4、启用用户认证"><a href="#4、启用用户认证" class="headerlink" title="4、启用用户认证"></a>4、启用用户认证</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/mongodb.conf <span class="comment">#进入文件进行配置</span></span><br></pre></td></tr></table></figure><p>将auth项的值置为true</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">... ...</span><br><span class="line"><span class="comment"># Enables periodic logging of CPU utilization and I/O wait</span></span><br><span class="line"><span class="comment">#cpu = true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Turn on/off security.  Off is currently the default</span></span><br><span class="line"><span class="comment">#noauth = true</span></span><br><span class="line">auth = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Verbose logging output.</span></span><br><span class="line"><span class="comment">#verbose = true</span></span><br><span class="line">... ...</span><br></pre></td></tr></table></figure><p>重启一下数据库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">exit</span> <span class="comment">#退出mongo</span></span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line">service mongodb restart <span class="comment">#重启</span></span><br></pre></td></tr></table></figure><h2 id="5、测试"><a href="#5、测试" class="headerlink" title="5、测试"></a>5、测试</h2><p>我们直接不用账户登录，会显示没有权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br><span class="line">&gt; show dbs</span><br><span class="line">2022-08-27T14:50:30.755+0800 E QUERY    [thread1] Error: listDatabases failed:&#123;</span><br><span class="line"><span class="string">&quot;ok&quot;</span> : 0,</span><br><span class="line"><span class="string">&quot;errmsg&quot;</span> : <span class="string">&quot;there are no users authenticated&quot;</span>,</span><br><span class="line"><span class="string">&quot;code&quot;</span> : 13,</span><br><span class="line"><span class="string">&quot;codeName&quot;</span> : <span class="string">&quot;Unauthorized&quot;</span></span><br><span class="line">&#125; :</span><br><span class="line">... ...</span><br></pre></td></tr></table></figure><p>用我们的管理员账户登录试试看</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo -u xxxxxx -p xxxxxxxx --authenticationDatabase admin <span class="comment"># xxxx为你的用户名和密码</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mongo -u xxx_xxxx -p xxxxxxxx --authenticationDatabase admin </span><br><span class="line">MongoDB shell version v3.6.8</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017</span><br><span class="line">Implicit session: session &#123; <span class="string">&quot;id&quot;</span> : UUID(<span class="string">&quot;xxxxxxxxxxxxxxxxxxxxx&quot;</span>) &#125;</span><br><span class="line">MongoDB server version: 3.6.8</span><br><span class="line">Server has startup warnings:</span><br><span class="line">... ...</span><br><span class="line">&gt; show dbs <span class="comment">#查看系统各个数据库情况</span></span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line"><span class="built_in">local</span>   0.000GB</span><br><span class="line"><span class="comment"># 如果没有向一个数据库填入任何信息的话，默认不显示</span></span><br><span class="line">&gt; use admin <span class="comment">#查看一个库</span></span><br><span class="line">switched to db admin</span><br><span class="line">&gt; show <span class="built_in">users</span> <span class="comment">#查看用户</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;_id&quot;</span> : <span class="string">&quot;admin.xxx_xxxx&quot;</span>,</span><br><span class="line"><span class="string">&quot;userId&quot;</span> : UUID(<span class="string">&quot;xxxxxxxxxxxxxxxxx&quot;</span>),</span><br><span class="line"><span class="string">&quot;user&quot;</span> : <span class="string">&quot;xxx_xxxx&quot;</span>,</span><br><span class="line"><span class="string">&quot;db&quot;</span> : <span class="string">&quot;admin&quot;</span>,</span><br><span class="line"><span class="string">&quot;roles&quot;</span> : [</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;role&quot;</span> : <span class="string">&quot;root&quot;</span>,</span><br><span class="line"><span class="string">&quot;db&quot;</span> : <span class="string">&quot;admin&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>至此mongo数据库就搞定了</p><h1 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h1><h2 id="1、安装虚拟环境"><a href="#1、安装虚拟环境" class="headerlink" title="1、安装虚拟环境"></a>1、安装虚拟环境</h2><p>在~/目录下（链接到服务器的最开始目录）创建.virtualenvs文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> .virtualenvs</span><br></pre></td></tr></table></figure><p>下载pip包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv</span><br><span class="line">pip install virtualenvwrapper</span><br></pre></td></tr></table></figure><p>配置环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure><p>将如下代码添加到文件的最后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定虚拟环境目录</span></span><br><span class="line"><span class="built_in">export</span> WORKON_HOME=<span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line"><span class="comment"># 指定python版本</span></span><br><span class="line"><span class="built_in">export</span> VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3</span><br><span class="line"><span class="comment"># 指定virtualenv的路径</span></span><br><span class="line"><span class="built_in">export</span> VIRTUALENVWRAPPER_VIRTUALENV=/usr/local/bin/virtualenv</span><br><span class="line"><span class="built_in">source</span> /usr/local/bin/virtualenvwrapper.sh</span><br></pre></td></tr></table></figure><p>激活设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><h2 id="2、创建虚拟环境"><a href="#2、创建虚拟环境" class="headerlink" title="2、创建虚拟环境"></a>2、创建虚拟环境</h2><p>我们每一个项目最好都有一个独立的虚拟环境，以保证我们的整个系统不会因为杂乱的各种环境设置搞得乱七八糟</p><p>在python3中，创建虚拟环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv -p python3 虚拟环境名称 <span class="comment">#如：mkvirtualenv -p python3 venv（一个叫venv的虚拟环境）</span></span><br></pre></td></tr></table></figure><h2 id="3、进入虚拟环境"><a href="#3、进入虚拟环境" class="headerlink" title="3、进入虚拟环境"></a>3、进入虚拟环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workon 对应虚拟环境名 <span class="comment">#workon venv</span></span><br></pre></td></tr></table></figure><p>如果不知道虚拟环境名，可以输完workon 点击两下tab键既可以提示你的虚拟环境名</p><h1 id="安装配置Nginx"><a href="#安装配置Nginx" class="headerlink" title="安装配置Nginx"></a>安装配置Nginx</h1><h2 id="1、安装-1"><a href="#1、安装-1" class="headerlink" title="1、安装"></a>1、安装</h2><p>在我们刚刚建好的虚拟环境下安装nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure><p>我们要知道的nginx的启动停止指令(先别输入)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/nginx start <span class="comment">#启动</span></span><br><span class="line">/etc/init.d/nginx stop  <span class="comment">#停止</span></span><br></pre></td></tr></table></figure><h2 id="2、配置-1"><a href="#2、配置-1" class="headerlink" title="2、配置"></a>2、配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure><p>进入上述文件后改成如下配置(不要直接复制，有一些配置项只是注释了，我们要看好每一项进行配置)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果是多台服务器的话，则在此配置，并修改 location 节点下面的 proxy_pass </span></span><br><span class="line">upstream flask &#123;</span><br><span class="line">        server 127.0.0.1:5000;</span><br><span class="line">        server 127.0.0.1:5001;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        <span class="comment"># 监听80端口</span></span><br><span class="line">        listen 80 default_server;</span><br><span class="line">        listen [::]:80 default_server;</span><br><span class="line"></span><br><span class="line">        root /var/www/html;</span><br><span class="line"></span><br><span class="line">        index index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">        server_name _;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                <span class="comment"># 请求转发到gunicorn服务器</span></span><br><span class="line">                proxy_pass http://127.0.0.1:5000;</span><br><span class="line">                <span class="comment"># 请求转发到多个gunicorn服务器</span></span><br><span class="line">                <span class="comment"># proxy_pass http://flask;</span></span><br><span class="line">                <span class="comment"># 设置请求头，并将头信息传递给服务器端 </span></span><br><span class="line">                proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">                <span class="comment"># 设置请求头，传递原始请求ip给 gunicorn 服务器</span></span><br><span class="line">                proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3、测试"><a href="#3、测试" class="headerlink" title="3、测试"></a>3、测试</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/nginx start <span class="comment">#启动nginx</span></span><br></pre></td></tr></table></figure><p>打开浏览器，网址栏输入你的公网地址，可以看到以下界面，或者是一个 welcome to nginx 的界面<br><img src="/2023/01/29/flask%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/3.png"></p><h1 id="安装gunicorn"><a href="#安装gunicorn" class="headerlink" title="安装gunicorn"></a>安装gunicorn</h1><p>在虚拟环境下安装gunicorn</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install gunicorn</span><br></pre></td></tr></table></figure><p>还没安装flask的也要安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip list <span class="comment">#查询已安装的包</span></span><br><span class="line">pip install flask</span><br></pre></td></tr></table></figure><p>测试一下，新建一个py文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim test.py <span class="comment">#新建</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#文件内容</span></span><br><span class="line">from flask import Flask </span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">@app.route(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">def index():</span><br><span class="line"><span class="built_in">return</span> <span class="string">&quot;只因你太美&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">app.run()</span><br></pre></td></tr></table></figure><p>运行test.py文件，在文件所在目录下运行一下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#gunicorn 语法格式如下</span></span><br><span class="line"><span class="comment"># -w: 表示进程（worker） -b：表示绑定ip地址和端口号（bind）</span></span><br><span class="line"><span class="comment">#gunicorn -w 2 -b 127.0.0.1:5000 运行文件名称:Flask程序实例名</span></span><br><span class="line"></span><br><span class="line">gunicorn -w 2 -b 127.0.0.1:5000 <span class="built_in">test</span>:app</span><br></pre></td></tr></table></figure><p>打开浏览器，刷新网页，就可以看到我们期待已久的鸡哥了</p><h1 id="项目上传"><a href="#项目上传" class="headerlink" title="项目上传"></a>项目上传</h1><h2 id="1、导出环境"><a href="#1、导出环境" class="headerlink" title="1、导出环境"></a>1、导出环境</h2><p>把在本地用到的包导出到一个requirements.txt的文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure><p>导出之后放在项目文件夹中等会一起上传到服务器</p><h2 id="2、项目上传至github"><a href="#2、项目上传至github" class="headerlink" title="2、项目上传至github"></a>2、项目上传至github</h2><p>本人是将项目上传到github再转到服务器上，然后我们要用到<a href="https://git-scm.com/">git</a>这个代码管理工具，所以要先下载git，再在GitHub上创建一个仓库，然后通过git把项目上传到GitHub仓库再转存到服务器上。</p><p>上传到github可参考<a href="https://blog.csdn.net/qq_40770527/article/details/124129505?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167328755616782429745456%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=167328755616782429745456&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-1-124129505-null-null.142%5Ev70%5Eone_line,201%5Ev4%5Eadd_ask&utm_term=github%E4%B8%8A%E4%BC%A0%E6%9C%AC%E5%9C%B0%E9%A1%B9%E7%9B%AE&spm=1018.2226.3001.4187">这篇文章</a></p><h2 id="3、服务器拉取GitHub项目"><a href="#3、服务器拉取GitHub项目" class="headerlink" title="3、服务器拉取GitHub项目"></a>3、服务器拉取GitHub项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git <span class="comment">#安装git</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/xxxxx/xxxxx.git <span class="comment">#把项目复制到服务器</span></span><br></pre></td></tr></table></figure><h2 id="4、安装所需pip包"><a href="#4、安装所需pip包" class="headerlink" title="4、安装所需pip包"></a>4、安装所需pip包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> 你的仓库名 <span class="comment">#进入项目文件夹</span></span><br><span class="line">pip install -r requirements.txt <span class="comment">#安装pip包</span></span><br></pre></td></tr></table></figure><h1 id="项目运行"><a href="#项目运行" class="headerlink" title="项目运行"></a>项目运行</h1><p>项目运行前要确保项目已经更改为生产下的代码，而非本地调试开发运行的代码。如前端请求函数的ip地址端口要设置好为服务器的ip地址，连接mongodb时要加上数据库用户名和密码获得权限等，具体问题不会就度娘==</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动应用</span></span><br><span class="line">gunicorn -w 2 -b 0.0.0.0:5000 xxx:app <span class="comment">#0.0.0.0监听发送到本服务器的请求</span></span><br><span class="line">gunicorn -w 2 -b 0.0.0.0:5000 xxx:app -D <span class="comment">#后台运行，关闭链接服务器将继续运行flask应用</span></span><br></pre></td></tr></table></figure><p>如果要结束运行，则杀死flask进程</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -tulpn <span class="comment">#查看系统网络进程</span></span><br><span class="line"><span class="built_in">kill</span> -9 xxxxx <span class="comment">#杀死xxxx号进程</span></span><br></pre></td></tr></table></figure><h3 id="至此我们的项目就跑起来了！"><a href="#至此我们的项目就跑起来了！" class="headerlink" title="至此我们的项目就跑起来了！"></a>至此我们的项目就跑起来了！</h3><p><img src="/2023/01/29/flask%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/4.jpg"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;上一年在学校做好了一个前后端打通的web应用，但是只是在本地上运行，没有部署到服务器。之前也没有接触过相关知识，于是跟着&lt;a href=&quot;h</summary>
      
    
    
    
    <category term="服务器部署" scheme="https://fxhblog.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/"/>
    
    
    <category term="flask" scheme="https://fxhblog.com/tags/flask/"/>
    
    <category term="mongodb" scheme="https://fxhblog.com/tags/mongodb/"/>
    
    <category term="python" scheme="https://fxhblog.com/tags/python/"/>
    
    <category term="linux" scheme="https://fxhblog.com/tags/linux/"/>
    
    <category term="ubuntu" scheme="https://fxhblog.com/tags/ubuntu/"/>
    
    <category term="nginx" scheme="https://fxhblog.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>博客搭建</title>
    <link href="https://fxhblog.com/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <id>https://fxhblog.com/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</id>
    <published>2023-01-08T16:00:00.000Z</published>
    <updated>2023-12-03T10:03:01.939Z</updated>
    
    <content type="html"><![CDATA[<h4 id="跟随教程-csdn"><a href="#跟随教程-csdn" class="headerlink" title="跟随教程: csdn"></a>跟随教程: <a href="https://blog.csdn.net/qq_36759224/article/details/82121420?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167326114016800215046641%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=167326114016800215046641&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-1-82121420-null-null.142%5Ev70%5Eone_line,201%5Ev4%5Eadd_ask&utm_term=github%20pages&spm=1018.2226.3001.4187">csdn</a></h4><h1 id="我是如何搭建我的博客的？"><a href="#我是如何搭建我的博客的？" class="headerlink" title="我是如何搭建我的博客的？"></a>我是如何搭建我的博客的？</h1><h2 id="github-page"><a href="#github-page" class="headerlink" title="github page"></a>github page</h2><p>通过 github page+hexo实现的个人博客搭建，github page可以托管我们的静态网页，适合博客这种比较简单无后端的网站，还有一个优点是免费。一开始我是打算通过阿里云实现一个服务，但是发现要收费，学生党没钱就此作罢。于是我把目光投向GitHub page，提供一个免费的服务器，也免去了自己搭建服务器和写数据库的麻烦。</p><h2 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h2><p>hexo是一个博客框架，依赖node.js。免去了对前端页面html，css等的复杂编写，把博客搭建简化了许多，也让人可以专注于博客内容本身而非其他。</p><h1 id="开始搭建"><a href="#开始搭建" class="headerlink" title="开始搭建"></a>开始搭建</h1><h2 id="1-安装node-js"><a href="#1-安装node-js" class="headerlink" title="1 安装node.js"></a>1 安装node.js</h2><p>我们的hexo框架需要依赖node.js，所以我们先安装<a href="https://nodejs.org/en/">node.js</a>。<br>选择recommended for most users版本即可</p><p>什么是node.js:node.js我的理解就是一个让JavaScript能够在服务器端运行的运行环境，把我们常接触的在浏览器前端的js变成一个在后端也能进行服务的语言。</p><h2 id="2-安装git"><a href="#2-安装git" class="headerlink" title="2 安装git"></a>2 安装git</h2><p>我们需要通过git来把我们写好的文件上传到github上托管，于是安装<a href="https://git-scm.com/downloads">git</a><br>安装完成后通过cmd/powershell输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><p>若显示以下版本信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git version xx.xx.xx.windows.xx</span><br></pre></td></tr></table></figure><p>说明安装成功,此时在任意一个文件夹右键会有一个 Git bash here 的按钮，通过这个可以用命令行对这个文件夹进行git的管理</p><h2 id="3-安装hexo"><a href="#3-安装hexo" class="headerlink" title="3 安装hexo"></a>3 安装hexo</h2><p>我们在合适的位置新建一个文件夹，作为我们的博客文件夹，然后在这个文件夹中右键点击 git bash here，输入以下npm命令即可安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g <span class="comment"># 安装hexo</span></span><br></pre></td></tr></table></figure><p>若显示以下信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ hexo-cli@x.x.x</span><br><span class="line">updated 1 package <span class="keyword">in</span> xx s</span><br></pre></td></tr></table></figure><p>即安装成功</p><p>什么是npm：Node.js 平台的默认包管理工具，类似python的pip，conda</p><h2 id="4-初始化hexo"><a href="#4-初始化hexo" class="headerlink" title="4 初始化hexo"></a>4 初始化hexo</h2><p>在刚刚新建的文件夹里新建一个名为Hexo的文件夹，在这个Hexo文件夹内右键，点击git bash here，输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>然后显示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">added xxx packages <span class="keyword">in</span> xxx s</span><br><span class="line">INFO start blogging with hexo!</span><br></pre></td></tr></table></figure><p>即完成hexo初始化</p><p>然后我们可以继续输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g <span class="comment"># g即generate生成，生成静态文件</span></span><br><span class="line">hexo s <span class="comment"># s即server服务，打开本地调试服务</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop. <span class="comment"># 此时hexo在本地localhost:4000上运行</span></span><br></pre></td></tr></table></figure><p>在浏览器打开<a href="http://localhost:4000/">http://localhost:4000</a>，就可以看到hexo默认主题下的hello world 示例<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/helloworld.png"><br>到此，我们的博客在本地上已经可以运行，接下来我们要部署到github上</p><h2 id="5-github-pages准备工作"><a href="#5-github-pages准备工作" class="headerlink" title="5 github pages准备工作"></a>5 github pages准备工作</h2><p>首先注册<a href="https://github.com/">github</a></p><p>注册好之后，我们点击右上角的小头像，找到your repositories，点开后找到一个绿色的new按钮，新建一个GitHub库存，用来放我们的博客文件<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/repo.jpg"></p><h2 id="6-配置SSH密钥"><a href="#6-配置SSH密钥" class="headerlink" title="6 配置SSH密钥"></a>6 配置SSH密钥</h2><p>SSH密钥?：Git使用https协议，每次pull, push都要输入密码，相当的烦。使用git协议，然后使用SSH密钥。这样可以省去每次都输密码。大多数 Git 服务器都会选择使用 SSH 公钥来进行授权。系统中的每个用户都必须提供一个公钥用于授权，没有的话就要生成一个。<br>配置好 SSH 密钥后，我们才可以通过 git 操作实现本地代码库与 Github 代码库同步</p><p>在你的博客文件夹（hexo文件夹的上一级文件夹）git bash here输入以下命令:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;邮箱地址&quot;</span> <span class="comment"># 引号里面填写你的邮箱地址，比如我的是2210904816@qq.com</span></span><br></pre></td></tr></table></figure><p>之后会出现：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/c/Users/xxx/.ssh/id_rsa): <span class="comment"># 到这里可以直接回车将密钥按默认文件进行存储</span></span><br></pre></td></tr></table></figure><p>然后：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):  <span class="comment"># 这里是要你输入密码，其实不需要输什么密码，直接回车就行 </span></span><br><span class="line">Enter same passphrase again:  <span class="comment"># 再回车一次</span></span><br></pre></td></tr></table></figure><p>接下来屏幕会显示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Your identification has been saved <span class="keyword">in</span> /c/Users/xxx/.ssh/id_rsa.  </span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /c/Users/xxx/.ssh/id_rsa.pub.  </span><br><span class="line">The key fingerprint is:  <span class="comment"># 这里是各种字母数字组成的字符串，结尾是你的邮箱  </span></span><br><span class="line">The key<span class="string">&#x27;s randomart image is: # 这里也是各种字母数字符号组成的字符串  </span></span><br></pre></td></tr></table></figure><p>运行以下指令，把公钥复制到粘贴板上：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clip &lt; ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><h2 id="7-在github添加你的公钥"><a href="#7-在github添加你的公钥" class="headerlink" title="7 在github添加你的公钥"></a>7 在github添加你的公钥</h2><p>登录github，点击右上角头像，进入settings，找到左侧栏SSH and GPG keys</p><p>new一个ssh keys<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/ssh.png"></p><p>然后添加，title随便写，key复制粘贴板上刚刚复制的密钥</p><p><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/addkey.jpg"></p><h2 id="8-测试ssh"><a href="#8-测试ssh" class="headerlink" title="8 测试ssh"></a>8 测试ssh</h2><p>在博客文件夹git bash here 复制以下指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com <span class="comment"># 原封不动地复制过去即可</span></span><br></pre></td></tr></table></figure><p>然后如下显示：<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/connect.png"></p><p>马上填yes</p><p>然后显示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi xxx! You<span class="string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br></pre></td></tr></table></figure><p>说明成功</p><h2 id="9-配置-Git-个人信息"><a href="#9-配置-Git-个人信息" class="headerlink" title="9 配置 Git 个人信息"></a>9 配置 Git 个人信息</h2><p>Git 会根据用户的名字和邮箱来记录提交，GitHub 也是用这些信息来做权限的处理，输入以下命令进行个人信息的设置，把名称和邮箱替换成你自己的，名字可以不是 GitHub 的昵称，但为了方便记忆，建议与 GitHub 一致</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;此处填你的用户名&quot;</span>  <span class="comment"># 如git config --global user.name &quot;fxh803&quot;</span></span><br><span class="line">git config --global user.email  <span class="string">&quot;此处填你的邮箱&quot;</span>  <span class="comment"># 如git config --global user.email  &quot;2210xxxxxx@qq.com&quot;</span></span><br></pre></td></tr></table></figure><p>到此为止 SSH Key 配置成功，本机已成功连接到 Github</p><h2 id="10-将本地的-Hexo-文件更新到-Github-的库中"><a href="#10-将本地的-Hexo-文件更新到-Github-的库中" class="headerlink" title="10 将本地的 Hexo 文件更新到 Github 的库中"></a>10 将本地的 Hexo 文件更新到 Github 的库中</h2><p>登录 Github 打开自己的项目：用户名.github.io</p><p>鼠标移到右上绿色的按钮，选择SSH</p><p><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/usessh.jpg"></p><p>点击复制，然后进入hexo文件夹里，右键用记事本（Notepad++或者VS code等都可以）打开该文件夹下的 _config.yml 文件</p><p>按如下修改：(冒号后面有个空格)<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/deployset.jpg"></p><p>然后在hexo文件夹输入以下指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save <span class="comment"># 安装hexo部署到GitHub的包</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g  <span class="comment">#generate生成文件</span></span><br><span class="line">hexo d  <span class="comment">#deploy部署文件到远程</span></span><br><span class="line"><span class="comment"># 或者 hexo g -d</span></span><br></pre></td></tr></table></figure><p>然后就部署完成了<br>你的博客地址：https://你的用户名.github.io，现在每个人都可以通过此链接访问你的博客了</p><h1 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h1><p>在<a href="https://hexo.io/themes/">官方主题</a>网站有很多主题可供我们选择，这里以我自己的主题为例<br>点击这些主题页面，通常我们都可以找到主题作者的github，然后在他们的仓库里找到我们想要的那个主题仓库(通常命名为hexo-theme-xxx)，复制网址<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/themeurl.jpg"></p><p>然后打开我们hexo文件夹下的themes文件夹，右键git bash here，输入指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://...  <span class="comment"># 我们刚刚复制的主题网址 </span></span><br></pre></td></tr></table></figure><p>下载完之后，我们要在hexo文件夹下的 _config.yml 文件找到关键字 theme，修改参数为：theme：hexo-theme-xxx （就是你刚刚复制的主题仓库的名称）</p><p>返回 Hexo 目录，右键 Git Bash Here ，输入以下命令开始部署主题：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地<a href="http://localhost:4000/">localhost:4000</a>检查我们的主题是否更换，完成后我们就可以上传到github pages：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br><span class="line"><span class="comment"># hexo g -d</span></span><br></pre></td></tr></table></figure><p>此时访问自己的博客即可看见更换后的主题，但我们仍然需要对主题的相关配置进行修改，比如网站标题，图标等等，Hexo 中有两份主要的配置文件，名称都是 _config.yml ，它们均是用于站点配置使用的。其中，一份位于站点根目录下（比如：d:\xxx\Hexo\ _config.yml），主要包含 Hexo 本身整站的配置；另一份位于主题目录下（比如：d:\xxx\Hexo\themes\hexo-theme-pure\ _config.yml），这份配置由主题作者提供，主要用于配置主题相关的选项，一般 _config.yml 文件里都有相关注释，按需修改即可</p><h1 id="发表文章"><a href="#发表文章" class="headerlink" title="发表文章"></a>发表文章</h1><p>我们在博客文件夹的hexo/source/_posts里新建一个xxx.md的文件，或者在hexo文件夹输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new xxx</span><br></pre></td></tr></table></figure><p>即可新建一个md文件，然后在这个文件里编写我们的博客内容，具体md(markdown)语法自行百度，这里有一个例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章名称</span><br><span class="line"><span class="built_in">date</span>: 文章日期</span><br><span class="line">photos: 文章封面图（仅部分主题支持）</span><br><span class="line">tags: </span><br><span class="line">  - 文章标签1</span><br><span class="line">  - 文章标签2</span><br><span class="line">  - 文章标签3</span><br><span class="line">categories: 文章分类</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="comment">### 标题1</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">### 标题2</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们可以先打开本地服务边写边看网页效果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>写完之后我们可以用以下指令上传：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br><span class="line"><span class="comment"># hexo g -d</span></span><br></pre></td></tr></table></figure><h1 id="配置域名"><a href="#配置域名" class="headerlink" title="配置域名"></a>配置域名</h1><p>xxx.github.io这个域名真的太捞了，马上去阿里云搞个域名</p><p>注册登录阿里云，找到他们的热门产品域名注册-&gt;查询自己想要的域名-&gt;加入清单-&gt;支付-&gt;填写个人信息模板-&gt;完成<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/dns.jpg"></p><p>然后回到首页，点击右上角控制台-&gt;我的导航找到最近使用点击域名-&gt;点击左侧域名列表-&gt;点击我们要的域名列点击解析<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/yumingconsole.jpg"></p><p>点击添加记录，需要添加两个记录，两个记录类型都是 CNAME ，第一个主机记录为 @ ，第二个主机记录为 www，记录值都是填你自己的博客地址（比如我的是：fxh803.github.io），保存之后域名解析就完成了！（主机记录有 @ 和 www 能保证URL加不加 www 都能访问）<br><img src="/2023/01/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/jiexi.jpg"></p><p>为了使 GitHub 接收我们的域名，还需要在博客的根目录下添加一个名为 CNAME 的文件（注意不要加.txt，没有任何后缀名！），这个文件放到 Hexo 文件夹的 source 里面，文件里面填写你的域名（加不加www都行），比如要填写我的域名，文件里面就写：<a href="http://www.fxhblog.com/">www.fxhblog.com</a> 或者 fxhblog.com，经过以上操作，别人就可以通过 <a href="http://www.fxhblog.com/">www.fxhblog.com</a> 、fxhblog.com、fxh803.github.io 三个当中任意一个访问博客了<br>这里我一开始填 <a href="http://www.fxhblog.com/">www.fxhblog.com</a> 会访问不了出bug，建议还是填xxx.com，简短点也好</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;跟随教程-csdn&quot;&gt;&lt;a href=&quot;#跟随教程-csdn&quot; class=&quot;headerlink&quot; title=&quot;跟随教程: csdn&quot;&gt;&lt;/a&gt;跟随教程: &lt;a href=&quot;https://blog.csdn.net/qq_36759224/article/d</summary>
      
    
    
    
    <category term="个人博客" scheme="https://fxhblog.com/categories/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="hexo" scheme="https://fxhblog.com/tags/hexo/"/>
    
    <category term="博客搭建" scheme="https://fxhblog.com/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    <category term="github page" scheme="https://fxhblog.com/tags/github-page/"/>
    
    <category term="git" scheme="https://fxhblog.com/tags/git/"/>
    
    <category term="node.js" scheme="https://fxhblog.com/tags/node-js/"/>
    
  </entry>
  
</feed>
